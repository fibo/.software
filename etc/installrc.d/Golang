
# Get here the list of builds https://storage.googleapis.com/golang/

# Code stolen from https://github.com/apex/apex/blob/master/install.sh
UNAME=$(uname)

if [ "$UNAME" != "Linux" -a "$UNAME" != "Darwin" ]; then
	echo "Sorry, OS not supported: ${UNAME}".
	exit 1
fi

if [ "$UNAME" = "Darwin" ]; then
	OSX_ARCH=$(uname -m)
	if [ "${OSX_ARCH}" = "x86_64" ]; then
		PLATFORM="darwin-amd64-osx"
	else
		echo "Sorry, architecture not supported: ${OSX_ARCH}.
		exit 1
	fi
elif [ "$UNAME" = "Linux" ]; then
	LINUX_ARCH=$(uname -m)
	if [ "${LINUX_ARCH}" = "x86_64" ]; then
		PLATFORM="linux-amd64"
	else
		echo "Sorry, architecture not supported: ${LINUX_ARCH}.
	exit 1
fi

SOURCES_URI=https://storage.googleapis.com/golang/go${VERSION}.${PLATFORM}.tar.gz

unset PLATFORM

function _build() {
	source ~/.software/etc/profile.d/golang.sh
	chmod +x ~/.software/etc/profile.d/golang.sh

	if [ -d $GOROOT ]; then
		rm -rf $GOROOT
	fi

	mkdir -p $GOPATH
	mv $CURRENT_VERSION_DIR $GOROOT
}

